$roomyitemsep: 0.375rem;
$mark-width: 1.5rem;

.list {
    @extend .list-unstyled;
    li {
        --paritemsep: 0px;
        --markwidth: #{$mark-width};
        display: flex;
        flex-flow: row nowrap;
        gap: 0.5rem;
        align-items: first baseline;
        .li-mark {
            flex: 0 0 var(--markwidth);
            text-align: right;
        }
        .li-content {
            flex: 1;
        }
        .list:not(.list-roomy) {
            margin-bottom: var(--paritemsep);
        }
    }
}

.list-olist {
    &.pseudocode {
        @mixin pcode-style($initial-gap, $indent) {
            $mark-width: 1.25rem;
            > li {
                --markwidth: #{$mark-width};
                gap: $initial-gap;
            }
            @for $i from 1 through 3 {
                &.level-#{$i + 1} {
                    margin-left: -($i - 1)*$indent - $initial-gap - $mark-width;
                    > li {
                        gap: $i*$indent + $initial-gap;
                    }
                }
            }
        }

        @include pcode-style($initial-gap: 0.75rem, $indent: 1.5rem);

        @include media-breakpoint-up(sm) {
            @include pcode-style($initial-gap: 0.75rem, $indent: 1.75rem);
        }

        @include media-breakpoint-up(md) {
            @include pcode-style($initial-gap: 1rem, $indent: 2rem);
        }

        .li-mark {
            font-size: 90%;
            color: var(--bs-tertiary-color);
        }
    }
}

.list-ulist {
    &:not(.list-checklist) {
        > li {
            --markwidth: 0.75rem;
        }
    }
    > li:not(.checked) > .li-mark {
        font-weight: 500;
    }
    &.list-unmarked:not(.list-checklist) {
        > li {
            gap: 0;
            > .li-mark {
                visibility: hidden;
            }
        }
    }
}

.list-roomy {
    --paritemsep: #{$roomyitemsep};
    &.list-inside > li {
        margin-bottom: var(--parsep);
    }
    > li {
        --paritemsep: #{$roomyitemsep};
    }
}

.list-inside {
    > li {
        display: block;
        .li-mark-inside {
            margin-right: 0.125rem;
        }
    }
}

.list-relative {
    > li {
        --markwidth: 2.25rem;
    }
}

.list-colist {
    --paritemsep: 0px;
}

.dlist {
    --paritemsep: 0.25rem;
    dt {
        font-style: italic;
        margin-bottom: 0;
        font-weight: 600;
    }
    dd {
        margin-left: 0.75rem;
        margin-bottom: 0;
    }
}

.list-wrapper {
    .block-title {
        margin-bottom: var(--paritemsep);      
    }
}

.dlist-wrapper {
    @extend .block;
}

.figlist-wrapper {
    @extend .figbox;
    .figlist {
        margin-bottom: 0;
        @extend .list-unstyled;
        display: flex;
        flex-flow: row wrap;
        gap: 0.75rem;
        justify-content: space-evenly;
        align-items: last baseline;
        li {
            flex: 1;
            .li-mark {
                margin-right: 1ex;
            }
            figure {
                margin-bottom: 0.25rem;
                img {
                    min-width: 300px;
                }
            }
        }
    }
    .figlist-title {
        padding-left: var(--fw-padding);
        padding-right: var(--fw-padding);
        text-align: center;
        @extend .figure-caption;
    }
}

p:has(+ .list), p:has(+ .list-wrapper) {
    margin-bottom: $roomyitemsep;
}
